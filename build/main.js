(()=>{"use strict";var e={128:(e,n,t)=>{t.d(n,{A:()=>g});var i=t(601),r=t.n(i),o=t(314),s=t.n(o),a=t(417),c=t.n(a),d=new URL(t(687),t.b),l=new URL(t(310),t.b),p=s()(r()),u=c()(d),m=c()(l);p.push([e.id,`@font-face {\n    font-family: "Oswald";\n    src: url(${u});\n}\n\n@font-face {\n    font-family: "Nunito";\n    src: url(${m});\n}`,""]);const g=p},254:(e,n,t)=>{t.d(n,{A:()=>x});var i=t(601),r=t.n(i),o=t(314),s=t.n(o),a=t(417),c=t.n(a),d=new URL(t(987),t.b),l=new URL(t(573),t.b),p=new URL(t(50),t.b),u=new URL(t(17),t.b),m=new URL(t(727),t.b),g=s()(r()),h=c()(d),b=c()(l),v=c()(p),y=c()(u),f=c()(m);g.push([e.id,`* {\n    margin: 0;\n    padding: 0;\n}\n\nbody {\n    width: 100%;\n    height: 100%;\n}\n\n.input-container {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    text-align: center;\n    margin-top: 50px;\n}\n\n.input-text {\n    width: 100%;\n    height: 100%;\n    max-width: 700px;\n    max-height: 50px;\n    padding: 10px;\n    resize: none;\n    border-radius: 10px;\n    font-size: 20px;\n}\n\n.btn-container {\n    margin-left: 20px;\n}\n\n.btn {\n    width: 40px;\n    height: 40px;\n    margin-right: 10px;\n    cursor: pointer;\n    transition: opacity 100ms linear;\n    z-index: 1;\n}\n\n.add-mesage {\n    background: url(${h});\n    background-size: cover;\n    background-repeat: no-repeat;\n    border: none;\n}\n\n.add-video {\n    background: url(${b});\n    background-size: cover;\n    background-repeat: no-repeat;\n    border: none;\n}\n\n.add-audio {\n    background: url(${v});\n    background-size: cover;\n    background-repeat: no-repeat;\n    border: none;\n}\n\n.btn:hover {\n    opacity: 0.5;\n}\n\n.btn:active {\n    opacity: 0.3;\n}\n\n.list-msg {\n    padding: 20px 0;\n    width: 58%;\n    list-style: none;\n    margin: auto;\n    margin-top: 20px;\n    margin-left: 50%;\n}\n\n.msg {\n    word-break: break-word;\n    width: 50%;\n    min-height: 50px;\n    margin: auto;\n    padding: 20px;\n    border: 1px solid;\n    background-color: white;\n    margin-top: 10px;\n    border-radius: 20px;\n}\n\n.element-header {\n    text-align: right;\n}\n\n.element-geolocation {\n    display: inline-block;\n    margin-top: 15px;\n}\n\n.element-date {\n    margin-right: 10px;\n}\n\n.form-error {\n    position: absolute;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    text-align: center;\n\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n\n    border-radius: 10px;\n    width: 380px;\n    height: 165px;\n    padding: 15px;\n\n    background-color: white;\n    border: 1px solid;\n\n    opacity: 1;\n    transition-property: all;\n    transition-duration: 100ms;\n    transition-timing-function: ease-in-out;\n\n    z-index: 3;\n}\n\n.form-error-title {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    width: 100%;\n    margin-bottom: 15px;\n}\n\n.error-description {\n    text-align: justify;\n    margin-bottom: 15px;\n}\n\n.title-error {\n    text-align: center;\n    font-size: 24px;\n    font-weight: bold;\n}\n\n.form-close {\n    content: "";\n    background-color: gray;\n    width: 20px;\n    height: 20px;\n    cursor: pointer;\n}\n\n.textarea-form-error {\n    width: 100%;\n    min-height: 25px;\n    border: 1px solid;\n    padding: 5px;\n    resize: none;\n}\n\n.btn-send-coords {\n    font-size: 20px;\n    width: 100%;\n    border: 0;\n    border-radius: 5px;\n    background: #4676D7;\n    color: #fff;\n    padding: 8px 16px;\n    font-size: 16px;\n    margin-top: 20px;\n    cursor: pointer;\n}\n\n.check-mark {\n    background: url(${y});\n    background-size: cover;\n    background-repeat: no-repeat;\n    border: none;\n    z-index: 2;\n    transition: transform 1s;\n}\n\n.check-mark:hover {\n    transform: rotate(360deg);\n    background-size: cover;\n    background-repeat: no-repeat;\n    cursor: pointer;\n    transition: transform 1s;\n}\n\n.cross {\n    background: url(${f});\n    background-size: cover;\n    background-repeat: no-repeat;\n    border: none;\n    z-index: 2;\n    transition: transform 1s;\n}\n\n.cross:hover {\n    transform: rotate(360deg);\n    background-size: cover;\n    background-repeat: no-repeat;\n    cursor: pointer;\n    transition: transform 1s;\n}\n\n.timer {\n    margin-right: 10px;\n    background-color: white;\n}\n\n.video {\n    display: block;\n    width: 400px;\n    height: 300px;\n    margin: auto;\n}`,""]);const x=g},16:(e,n,t)=>{t.d(n,{A:()=>H});var i=t(601),r=t.n(i),o=t(314),s=t.n(o),a=t(128),c=t(254),d=t(417),l=t.n(d),p=new URL(t(644),t.b),u=new URL(t(532),t.b),m=new URL(t(145),t.b),g=new URL(t(333),t.b),h=new URL(t(553),t.b),b=new URL(t(508),t.b),v=new URL(t(549),t.b),y=new URL(t(484),t.b),f=new URL(t(946),t.b),x=new URL(t(323),t.b),k=new URL(t(432),t.b),L=new URL(t(444),t.b),w=new URL(t(152),t.b),E=new URL(t(252),t.b),S=new URL(t(337),t.b),M=s()(r());M.i(a.A),M.i(c.A);var C=l()(p),$=l()(u),A=l()(m),q=l()(g),U=l()(h),R=l()(b),j=l()(v),z=l()(y),T=l()(f),O=l()(x),I=l()(k),N=l()(L),V=l()(w),D=l()(E),_=l()(S);M.push([e.id,`* {\n    margin: 0;\n    padding: 0;\n}\n\n/*HEADER*/\n\n.chat-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    border: 1px solid black;\n    padding: 15px;\n}\n\n.icon {\n    position: relative;\n    display: inline-block;\n    width: 40px;\n    height: 40px;\n    background-size: 287px;\n    background-repeat: no-repeat;\n    background-size: cover;\n    background-repeat: no-repeat;\n    cursor: pointer;\n}\n\n.profile {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n}\n\n.profile-photo {\n    background-image: url(${C});\n    background-size: cover;\n    background-repeat: no-repeat;\n    width: 40px;\n    height: 40px;\n    margin-right: 20px;\n}\n\n.profile-name {\n    font-size: 20px;\n    font-family: "Oswald";\n}\n\n.time-was-online {\n    font-family: "Nunito";\n}\n\n.interaction-menu {\n    position: relative;\n}\n\n.interaction-menu>.icon {\n    margin-right: 20px;\n    cursor: pointer;\n}\n\n.search {\n    background-image: url(${$});\n    transition: background-image 90ms;\n}\n\n.search:hover {\n    background-image: url(${A});\n    transition: background-image 90ms;\n}\n\n.send-video {\n    background-image: url(${q});\n    transition: background-image 90ms;\n}\n\n.send-video:hover {\n    background-image: url(${U});\n    transition: background-image 90ms;\n}\n\n.menu {\n    position: relative;\n    background-image: url(${R});\n    transition: background-image 90ms;\n}\n\n.menu:hover {\n    background-image: url(${j});\n    transition: background-image 90ms;\n}\n\n.container-menu {\n    min-width: 210px;\n    position: absolute;\n    right: 0;\n    top: 0;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    background-color: white;\n    border: 1px solid;\n    border-radius: 20px;\n    visibility: hidden;\n    opacity: 0;\n    transition: opacity 500ms;\n    z-index: 1;\n}\n\n.menu-items {\n    margin-top: 35px;\n}\n\n.menu-item {\n    padding: 0 13px;\n    font-size: 17px;\n    font-family: "Nunito";\n    text-align: center;\n    margin-bottom: 20px;\n    cursor: pointer;\n}\n\n.menu-item:hover {\n    opacity: 0.5;\n}\n\n.close-menu {\n    background-image: url(${z});\n    width: 30px;\n    height: 30px;\n    background-size: cover;\n    background-repeat: no-repeat;\n    cursor: pointer;\n    position: absolute;\n    top: 5px;\n    right: 5px;\n}\n\n.close-menu:hover {\n    opacity: 0.5;\n}\n\n.all-messages {\n    padding-top: 40px;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    background-color: white;\n    border: 1px solid;\n    border-radius: 20px;\n    visibility: hidden;\n    opacity: 0;\n    transition: opacity 500ms;\n    z-index: 1;\n    width: 220px;\n    transform: translate(-50%, -50%);\n}\n\n.type-message {\n    color: white;\n    display: block;\n    padding: 0 13px;\n    font-size: 17px;\n    font-family: "Nunito";\n    text-align: center;\n    margin-bottom: 20px;\n    cursor: pointer;\n    width: 80%;\n    background-color: #2b9ec8;\n    padding: 10px;\n    border-radius: 10px;\n}\n\n.type-message:hover {\n    opacity: 0.5;\n}\n\n/*HEADER*/\n\n/*MAIN*/\n\n.main {\n    height: 100vh;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.chat {\n    display: flex;\n    flex-direction: column;\n    width: 75%;\n    min-height: 650px;\n    margin: auto;\n    border: 1px solid black;\n    margin-top: 20px;\n}\n\n.chat-main {\n    position: relative;\n    width: 100%;\n    background-color: rgba(217, 102, 255, 0.75);\n    min-height: 520px;\n    border: 1px solid black;\n}\n\n.close-all-messages {\n    background-image: url(${z});\n    width: 30px;\n    height: 30px;\n    background-size: cover;\n    background-repeat: no-repeat;\n    cursor: pointer;\n    position: absolute;\n    top: 5px;\n    right: 5px;\n}\n\n.close-all-messages:hover {\n    opacity: 0.5;\n}\n\n\n/*MAIN*/\n\n/*FOOTER*/\n.chat-footer {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    height: 10%;\n    border: 1px solid black;\n    padding: 0px 30px;\n}\n\n\n\n.write-message {\n    display: flex;\n    width: 75%;\n    height: 70px;\n    padding: 0 20px;\n    font-size: 20px;\n    border: none;\n    resize: none;\n    font-family: "Oswald";\n    letter-spacing: 5px;\n    line-height: 65px;\n}\n\n.interactive-message>.icon {\n    margin-right: 10px;\n    background-size: cover;\n    background-repeat: no-repeat;\n    cursor: pointer;\n}\n\n.interactive-message {\n    display: flex;\n    position: relative;\n    justify-content: center;\n    align-content: center;\n    align-items: center;\n}\n\n.send-file {\n    background-image: url(${T});\n    background-size: cover;\n    background-repeat: no-repeat;\n    cursor: pointer;\n    transition: background-image 90ms;\n    transition: transform 250ms;\n}\n\n.input-file {\n    display: none;\n}\n\n.send-file:hover {\n    transform: rotate(180deg);\n    background-size: cover;\n    background-repeat: no-repeat;\n    cursor: pointer;\n    transition: transform 250ms;\n}\n\n.send-smile {\n    background-image: url(${O});\n    transition: background-image 90ms;\n}\n\n.smile-container {\n    position: absolute;\n    top: -165%;\n    left: 20%;\n    transform: translate(-50%, -50%);\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n    text-align: center;\n    width: 160px;\n    background-color: white;\n    border: 1px solid;\n    visibility: hidden;\n    opacity: 0;\n    transition: opacity 200ms;\n}\n\n.emoji {\n    width: 40px;\n    cursor: pointer;\n}\n\n.emoji:hover {\n    opacity: 0.5;\n}\n\n.send-smile:hover {\n    background-image: url(${I});\n    transition: background-image 90ms;\n}\n\n.send-voice-message {\n    background-image: url(${N});\n    transition: background-image 100ms;\n}\n\n.send-voice-message:hover {\n    background-image: url(${V});\n    transition: background-image 100ms;\n}\n\n.send-text-message {\n    background-image: url(${D});\n    transition: background-image 250ms;\n}\n\n.send-text-message:hover {\n    background-image: url(${_});\n    transition: background-image 100ms;\n}\n\n/*FOOTER*/\n\n.send_,\n.timer_,\n.stop_ {\n    visibility: hidden;\n    display: none;\n}`,""]);const H=M},314:e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t="",i=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),i&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),i&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t})).join("")},n.i=function(e,t,i,r,o){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(i)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(s[c]=!0)}for(var d=0;d<e.length;d++){var l=[].concat(e[d]);i&&s[l[0]]||(void 0!==o&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=o),t&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=t):l[2]=t),r&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=r):l[4]="".concat(r)),n.push(l))}},n}},417:e=>{e.exports=function(e,n){return n||(n={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),n.hash&&(e+=n.hash),/["'() \t\n]|(%20)/.test(e)||n.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},601:e=>{e.exports=function(e){return e[1]}},72:e=>{var n=[];function t(e){for(var t=-1,i=0;i<n.length;i++)if(n[i].identifier===e){t=i;break}return t}function i(e,i){for(var o={},s=[],a=0;a<e.length;a++){var c=e[a],d=i.base?c[0]+i.base:c[0],l=o[d]||0,p="".concat(d," ").concat(l);o[d]=l+1;var u=t(p),m={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==u)n[u].references++,n[u].updater(m);else{var g=r(m,i);i.byIndex=a,n.splice(a,0,{identifier:p,updater:g,references:1})}s.push(p)}return s}function r(e,n){var t=n.domAPI(n);return t.update(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,r){var o=i(e=e||[],r=r||{});return function(e){e=e||[];for(var s=0;s<o.length;s++){var a=t(o[s]);n[a].references--}for(var c=i(e,r),d=0;d<o.length;d++){var l=t(o[d]);0===n[l].references&&(n[l].updater(),n.splice(l,1))}o=c}}},659:e=>{var n={};e.exports=function(e,t){var i=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}},540:e=>{e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},56:(e,n,t)=>{e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var i="";t.supports&&(i+="@supports (".concat(t.supports,") {")),t.media&&(i+="@media ".concat(t.media," {"));var r=void 0!==t.layer;r&&(i+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),i+=t.css,r&&(i+="}"),t.media&&(i+="}"),t.supports&&(i+="}");var o=t.sourceMap;o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),n.styleTagTransform(i,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}},113:e=>{e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}},310:(e,n,t)=>{e.exports=t.p+"9d7a6e03c6e3ed49c7ac.ttf"},687:(e,n,t)=>{e.exports=t.p+"31bce04a1ae8549b1464.ttf"},17:(e,n,t)=>{e.exports=t.p+"59d1508359e84c235381.png"},946:(e,n,t)=>{e.exports=t.p+"1ce750e007a625ae06ed.svg"},484:(e,n,t)=>{e.exports=t.p+"15eb07f1af2966fd019d.svg"},727:(e,n,t)=>{e.exports=t.p+"71c6ac26065f7ca500be.png"},432:(e,n,t)=>{e.exports=t.p+"4956a07feec8d4e2ec25.svg"},323:(e,n,t)=>{e.exports=t.p+"709a6ac6f69643f8fd12.svg"},508:(e,n,t)=>{e.exports=t.p+"096ae4718d76fd16c836.svg"},549:(e,n,t)=>{e.exports=t.p+"e2522ca22ef77e961572.svg"},444:(e,n,t)=>{e.exports=t.p+"818b11006f53311a5d57.svg"},152:(e,n,t)=>{e.exports=t.p+"a6f07f99a4e6eef6812b.svg"},644:(e,n,t)=>{e.exports=t.p+"11b5aa124c0609ce19b7.svg"},145:(e,n,t)=>{e.exports=t.p+"1c751e03da2451211b1e.svg"},532:(e,n,t)=>{e.exports=t.p+"25ebdd29174c4d609bbf.svg"},50:(e,n,t)=>{e.exports=t.p+"1ff037d5b250fd09a416.png"},337:(e,n,t)=>{e.exports=t.p+"86433a8e2208fbf8e7f7.svg"},987:(e,n,t)=>{e.exports=t.p+"aa781e00805b6515669d.png"},252:(e,n,t)=>{e.exports=t.p+"d2668a915b3d9b349ea3.svg"},573:(e,n,t)=>{e.exports=t.p+"7fb939f246bc372bfb9a.png"},333:(e,n,t)=>{e.exports=t.p+"44b86d3c6bece111ad24.svg"},553:(e,n,t)=>{e.exports=t.p+"1680815031e6f85c4fa8.svg"}},n={};function t(i){var r=n[i];if(void 0!==r)return r.exports;var o=n[i]={id:i,exports:{}};return e[i](o,o.exports,t),o.exports}t.m=e,t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var i=n.getElementsByTagName("script");if(i.length)for(var r=i.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=i[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})(),t.b=document.baseURI||self.location.href,t.nc=void 0,(()=>{var e=t(72),n=t.n(e),i=t(825),r=t.n(i),o=t(659),s=t.n(o),a=t(56),c=t.n(a),d=t(540),l=t.n(d),p=t(113),u=t.n(p),m=t(16),g={};g.styleTagTransform=u(),g.setAttributes=c(),g.insert=s().bind(null,"head"),g.domAPI=r(),g.insertStyleElement=l(),n()(m.A,g),m.A&&m.A.locals&&m.A.locals;class h{constructor(e){this.coords=e}createtUlList(){let e=document.querySelector(".messages-container"),n=document.querySelector(".chat-main");e||(e=document.createElement("ul")),e.classList.add("list-msg"),n.appendChild(e)}createMsg(e){let n=document.querySelector(".list-msg"),t=document.createElement("li"),i=document.createElement("div"),r=document.createElement("span"),o=document.createElement("span"),s=document.createElement("p"),a=document.createElement("span");return t.setAttribute("type","txt"),t.setAttribute("id",this.createId()),t.classList.add("msg"),i.classList.add("element-header"),r.classList.add("element-date"),o.classList.add("element-time"),s.classList.add("element-content"),a.classList.add("element-geolocation"),s.textContent=e,a.textContent=`[${this.coords[0]}, ${this.coords[1]}]`,i.appendChild(r),i.appendChild(o),t.appendChild(i),t.appendChild(s),t.appendChild(a),n.append(t),t}createLink(e){let n=document.querySelector(".list-msg"),t=document.createElement("li"),i=document.createElement("div"),r=document.createElement("span"),o=document.createElement("span"),s=document.createElement("a"),a=document.createElement("p"),c=document.createElement("span");return t.setAttribute("type","link"),t.setAttribute("id",this.createId()),s.setAttribute("href",e),t.classList.add("msg"),i.classList.add("element-header"),r.classList.add("element-date"),o.classList.add("element-time"),a.classList.add("element-content"),c.classList.add("element-geolocation"),a.textContent=e,c.textContent=`[${this.coords[0]}, ${this.coords[1]}]`,i.appendChild(r),i.appendChild(o),t.appendChild(i),t.appendChild(s),s.appendChild(a),t.appendChild(c),n.append(t),t}createVideo(e){let n=document.querySelector(".list-msg"),t=document.createElement("li"),i=document.createElement("video"),r=document.createElement("div"),o=document.createElement("span"),s=document.createElement("span"),a=document.createElement("p"),c=document.createElement("span");return t.setAttribute("type","video"),t.setAttribute("id",this.createId()),t.classList.add("msg"),i.classList.add("video"),i.controls=!0,r.classList.add("element-header"),o.classList.add("element-date"),s.classList.add("element-time"),a.classList.add("element-content"),c.classList.add("element-geolocation"),a.textContent=e,c.textContent=`[${this.coords[0]}, ${this.coords[1]}]`,r.appendChild(o),r.appendChild(s),t.appendChild(r),t.appendChild(i),t.appendChild(c),n.append(t),t}createAudio(e){let n=document.querySelector(".list-msg"),t=document.createElement("li"),i=document.createElement("audio"),r=document.createElement("div"),o=document.createElement("span"),s=document.createElement("span"),a=document.createElement("p"),c=document.createElement("span");return t.setAttribute("type","audio"),t.setAttribute("id",this.createId()),t.classList.add("msg"),i.classList.add("audio"),i.controls=!0,r.classList.add("element-header"),o.classList.add("element-date"),s.classList.add("element-time"),a.classList.add("element-content"),c.classList.add("element-geolocation"),a.textContent=e,c.textContent=`[${this.coords[0]}, ${this.coords[1]}]`,r.appendChild(o),r.appendChild(s),t.appendChild(r),t.appendChild(i),t.appendChild(c),n.append(t),t}createAttribute(e){let n=e.querySelector(".element-date"),t=e.querySelector(".element-time"),i=new Date,r=i.getFullYear(),o=i.getMonth()+1,s=i.getDate(),a=i.getHours(),c=i.getMinutes(),d=i.getSeconds();1==String(o).length&&(o="0"+o),1==String(s).length&&(o="0"+s),1==String(a).length&&(a="0"+a),1==String(c).length&&(c="0"+c),1==String(d).length&&(d="0"+d),n.textContent=s+"."+o+"."+r,t.textContent=a+":"+c+":"+d}createId=()=>Math.random().toString(36).slice(2)}const b=e=>{if(![e].join("").includes(","))return void alert("Не правилньо введены координаты!");let n=e.split(","),t=[];for(const e of n){let n=e.replaceAll(" ","").replaceAll("[","").replaceAll("]","");t.push(n)}return console.log(t),t},v=async e=>{console.log(e);const n={id:e.getAttribute("id"),type:e.getAttribute("type"),date:e.querySelector(".element-date").textContent,time:e.querySelector(".element-time").textContent,content:e.querySelector(".element-content").textContent,coords:e.querySelector(".element-geolocation").textContent};console.log(n);const t=JSON.stringify(n),i=await fetch("https://ahj-diplom-backend.onrender.com/",{headers:{"Content-Type":"application/json"},method:"POST",body:t}),r=i.json();console.log(i,r)};let y,f,x,k,L,w,E,S,M,C=document.querySelector(".send-voice-message"),$=document.querySelector(".send-video"),A=document.querySelector(".send-smile"),q=document.querySelector(".send_"),U=document.querySelector(".timer_"),R=document.querySelector(".stop_");const j=async function(){return new Promise(((e,n)=>{navigator.geolocation.getCurrentPosition((n=>{const{latitude:t,longitude:i}=n.coords;y=[t,i],e(y)}),(async function(){z();let n=document.querySelector(".form-error"),t=document.querySelector(".btn-send-coords"),i=document.querySelector(".form-close"),r=document.querySelector(".textarea-form-error");i.addEventListener("click",(async()=>{alert("Введите координаты!")})),t.addEventListener("click",(async t=>{t.preventDefault();let i=await r.value;if(console.log("данные получили"),!i||" "==i||"\n"==i)return console.log("Координат нет!"),void alert("Координат нет!");b(i)&&(i=b(i),y=i,e(y),n.remove(),console.log("данные коректные"))}))}))}))},z=()=>{document.body.insertAdjacentHTML("afterbegin",' <form class="form-error">\n              <div class="form-error-title">\n                  <div class="title-error">Что то пошло не так :(</div>\n                  <div class="form-close"></div>\n              </div>\n              <div class="error-description">К сожалению, нам не удалось опрделить ваше местоположение.\n              Пожалуйста, дайте разрешение на использование геолокации, либо введите координаты вручную.\n              Широта и долгота через запятую.\n              </div>\n              <textarea class="textarea-form-error" placeholder="Ваши координаты"></textarea>\n              <button class="btn-send-coords">Отправить</button>\n          </form>')},T=async function(e){if(e instanceof KeyboardEvent){if("Enter"!==e.key)return;e.preventDefault()}y||await j();let n=document.querySelector(".write-message").value;if(""==n&&(n="Пустое сообщение :("),n.toString().match(/^http.{0,}/g)){console.log("это ссылка",n);let e=new h(y);e.createtUlList();let t=e.createLink(n);return e.createAttribute(t),void v(t)}let t=new h(y);t.createtUlList();let i=t.createMsg(n);t.createAttribute(i),v(i)},O=async()=>{y||await j(),await async function(){try{E=await navigator.mediaDevices.getUserMedia({audio:!0}),M=new h(y),M.createtUlList();let e=M.createAudio(),n=e.querySelector(".audio");n.classList.add("recording"),M.createAttribute(e),L=new MediaRecorder(E);const t=[];L.start(),L.addEventListener("start",(()=>{console.log("start")})),L.addEventListener("dataavailable",(e=>{t.push(e.data)})),L.addEventListener("stop",(()=>{const e=new Blob(t);n.src=URL.createObjectURL(e),S=URL.createObjectURL(e)})),x=!0}catch(e){console.log(e),alert("Предоставьте доступ к микрофону, чтобы записывать аудио-сообщения!")}}(),x&&(console.log("audio"),B(),q.addEventListener("click",I),R.addEventListener("click",N),H())},I=async function(){console.log("send audio"),F(),L.stop(),E.getTracks().forEach((e=>e.stop())),document.querySelector(".recording").classList.remove("recording"),q.removeEventListener("click",I),R.removeEventListener("click",N),P()},N=async function(){console.log("delete audio"),L.stop(),E.getTracks().forEach((e=>e.stop()));let e=document.querySelector(".recording");e.parentNode.remove(),e.remove(),q.removeEventListener("click",I),R.removeEventListener("click",N),F(),P()},V=async()=>{y||await j(),await async function(){try{E=await navigator.mediaDevices.getUserMedia({video:!0}),w=new h(y),w.createtUlList();let e=w.createVideo(),n=e.querySelector(".video");n.classList.add("recording"),w.createAttribute(e),L=new MediaRecorder(E);const t=[];L.start(),L.addEventListener("start",(()=>{console.log("start")})),L.addEventListener("dataavailable",(e=>{t.push(e.data)})),L.addEventListener("stop",(()=>{const e=new Blob(t);n.src=URL.createObjectURL(e),S=URL.createObjectURL(e)})),f=!0}catch(e){console.log(e),alert("Предоставьте доступ к камере, чтобы записывать видео-сообщения!")}}(),f&&(B(),q.addEventListener("click",D),R.addEventListener("click",_),H())},D=async function(){console.log("send video"),F(),L.stop(),E.getTracks().forEach((e=>e.stop())),document.querySelector(".recording").classList.remove("recording"),q.removeEventListener("click",D),R.removeEventListener("click",_),P()},_=async function(e){console.log("delete video"),L.stop(),E.getTracks().forEach((e=>e.stop()));let n=document.querySelector(".recording");n.parentNode.remove(),n.remove(),q.removeEventListener("click",D),R.removeEventListener("click",_),F(),P()},H=()=>{let e=document.querySelector(".timer"),n=0,t=0;e.textContent=`0${n}:0${t}`,k=setInterval((()=>{e.textContent=`${n}:${t++}`,1==String(t).length&&1==String(n).length?e.textContent=`0${n}:0${t}`:String(t).length>1&&1==String(n).length?e.textContent=`0${n}:${t}`:1==String(t).length&&String(n).length>1?e.textContent=`${n}:0${t}`:String(t).length>1&&String(n).length>1&&(e.textContent=`${n}:${t}`),t>59&&(t="00",n+=1,1==String(n).length?e.textContent=`0${n}:${t}`:e.textContent=`${n}:${t}`)}),1e3)},P=()=>{clearInterval(k),U.classList.remove("timer"),U.textContent=""},B=()=>{C.style.display="none",$.style.display="none",A.style.display="none",q.classList.add("check-mark"),q.classList.add("icon"),R.classList.add("cross"),R.classList.add("icon"),U.classList.add("timer"),q.style.display="inline-block",R.style.display="inline-block",U.style.display="inline-block",q.style.visibility="visible",R.style.visibility="visible",U.style.visibility="visible"},F=()=>{C.style.display="inline-block",$.style.display="inline-block",A.style.display="inline-block",q.classList.remove("check-mark"),q.classList.remove("icon"),R.classList.remove("cross"),R.classList.remove("icon"),U.classList.remove("timer"),q.style.display="none",R.style.display="none",U.style.display="none",q.style.visibility="hidden",R.style.visibility="hidden",U.style.visibility="hidden"};class J{constructor(e,n,t,i,r,o,s){this.containerMenu=e,this.allMessages=n,this.iconSendVoiceMessage=t,this.iconSendVideoMessage=i,this.smileMenu=r,this.timer=o,this.textArea=s}headerMenuVisible=()=>{this.containerMenu.style.visibility="visible",this.containerMenu.style.opacity="1"};headerMenuHidden=()=>{this.containerMenu.style.opacity="0",this.containerMenu.style.visibility="hidden"};showAllMessagesBlock=()=>{this.allMessages.style.visibility="visible",this.allMessages.style.opacity="1",this.containerMenu.style.visibility="hidden"};closeAllMessagesBlock=()=>{this.allMessages.style.opacity="0",this.allMessages.style.visibility="hidden"};changeMicroToMessage=e=>{let n=document.querySelector(".send-text-message");return null!=e.data||void 0===e.data||""!=this.textArea.value&&n?(""!=this.textArea.value&&n||this.iconSendVoiceMessage.classList.remove("send-text-message")," "!=e.data&&!n&&null!=e.data||n||void 0===e.data?(this.iconSendVoiceMessage.classList.add("send-text-message"),this.iconSendVoiceMessage.classList.remove("send-voice-message"),n=document.querySelector(".send-text-message"),n.addEventListener("click",T),void n.removeEventListener("click",O)):(this.iconSendVoiceMessage.classList.add("send-voice-message"),n.addEventListener("click",O),void n.removeEventListener("click",T))):(this.iconSendVoiceMessage.classList.remove("send-text-message"),this.iconSendVoiceMessage.classList.add("send-voice-message"),n.addEventListener("click",O),void n.removeEventListener("click",T))};showSmileMenu=()=>{this.smileMenu.style.opacity="1",this.smileMenu.style.visibility="visible",this.timer=setTimeout(this.closeMenuSmile,2e3)};closeMenuSmile=()=>{this.smileMenu.style.opacity="0",this.smileMenu.style.visibility="hidden"};listenerEmojiClick=e=>{clearTimeout(this.timer),this.textArea.value+=e.target.textContent,this.changeMicroToMessage(e),this.smileMenu.style.opacity="0",this.smileMenu.style.visibility="hidden"};listenerEmojiMouseOver=()=>{clearTimeout(this.timer)};listenerEmojiMouseOut=()=>{this.timer=setTimeout(this.closeMenuSmile,2e3)}}document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".menu"),n=document.querySelector(".container-menu"),t=n.querySelector(".close-menu"),i=n.querySelector(".show-messages"),r=document.querySelector(".all-messages"),o=r.querySelector(".close-all-messages"),s=document.querySelector(".write-message"),a=document.querySelector(".send-voice-message"),c=document.querySelector(".send-video"),d=document.querySelector(".send-smile"),l=document.querySelector(".smile-container"),p=l.querySelectorAll(".emoji"),u=new J(n,r,a,c,l,void 0,s);e.addEventListener("click",u.headerMenuVisible),t.addEventListener("click",u.headerMenuHidden),i.addEventListener("click",u.showAllMessagesBlock),o.addEventListener("click",u.closeAllMessagesBlock),s.addEventListener("input",u.changeMicroToMessage),s.addEventListener("keypress",T),d.addEventListener("mouseover",u.showSmileMenu);for(const e of p)e.addEventListener("click",u.listenerEmojiClick),e.addEventListener("mouseover",u.listenerEmojiMouseOver),e.addEventListener("mouseout",u.listenerEmojiMouseOut);a.addEventListener("click",O),c.addEventListener("click",V)}))})()})();