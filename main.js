(()=>{"use strict";var e={128:(e,t,n)=>{n.d(t,{A:()=>g});var o=n(601),i=n.n(o),r=n(314),a=n.n(r),s=n(417),l=n.n(s),c=new URL(n(687),n.b),d=new URL(n(310),n.b),m=a()(i()),p=l()(c),u=l()(d);m.push([e.id,`@font-face {\n    font-family: "Oswald";\n    src: url(${p});\n}\n\n@font-face {\n    font-family: "Nunito";\n    src: url(${u});\n}`,""]);const g=m},254:(e,t,n)=>{n.d(t,{A:()=>M});var o=n(601),i=n.n(o),r=n(314),a=n.n(r),s=n(128),l=n(417),c=n.n(l),d=new URL(n(987),n.b),m=new URL(n(573),n.b),p=new URL(n(50),n.b),u=new URL(n(23),n.b),g=new URL(n(13),n.b),h=new URL(n(724),n.b),y=new URL(n(484),n.b),f=new URL(n(17),n.b),b=new URL(n(727),n.b),v=a()(i());v.i(s.A);var x=c()(d),L=c()(m),k=c()(p),E=c()(u),w=c()(g),C=c()(h),S=c()(y),q=c()(f),A=c()(b);v.push([e.id,`.btn {\n    background: none;\n    border: none;\n    cursor: pointer;\n    transition: opacity 100ms linear;\n    z-index: 1;\n}\n\n.btn:hover {\n    opacity: 0.5;\n}\n\n.btn:active {\n    opacity: 0.3;\n}\n\n.add-mesage {\n    background: url(${x});\n    background-size: cover;\n    background-repeat: no-repeat;\n    border: none;\n}\n\n.add-video {\n    background: url(${L});\n    background-size: cover;\n    background-repeat: no-repeat;\n    border: none;\n}\n\n.add-audio {\n    background: url(${k});\n    background-size: cover;\n    background-repeat: no-repeat;\n    border: none;\n}\n\n.list-msg {\n    padding: 20px 0;\n    width: 50%;\n    list-style: none;\n    margin: auto;\n    margin-top: 20px;\n    margin-left: 50%;\n}\n\n.msg {\n    word-break: break-word;\n    width: 70%;\n    min-height: 50px;\n    margin: auto;\n    padding: 20px;\n    background-color: white;\n    margin-top: 10px;\n    border-radius: 20px;\n    /* background-color: #9c1ec9; */\n    background-color: #e2aa3a;\n    border: 2px solid white;\n    box-shadow: 20px 5px 15px white;\n}\n\n.element-header {\n    font-size: 17px;\n    font-family: "Nunito";\n    text-align: right;\n    color: white;\n    margin-bottom: 15px;\n}\n\n.element-content-container {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n}\n\n.element-content {\n    color: white;\n    font-size: 17px;\n    font-family: "Nunito";\n}\n\n.element-content-file:hover {\n    text-decoration: underline;\n    cursor: pointer;\n}\n\n.element-save-content {\n    background-image: url(${E});\n    background-repeat: no-repeat;\n    background-size: cover;\n    width: 40px;\n    height: 40px;\n    cursor: pointer;\n}\n\n.element-link {\n    text-decoration: none;\n}\n\n.element-link:hover {\n    text-decoration: underline black;\n}\n\n.element-footer {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-top: 15px;\n}\n\n.element-geolocation {\n    display: inline-block;\n    font-size: 17px;\n    font-family: "Nunito";\n    color: white;\n}\n\n.element-date {\n    margin-right: 10px;\n}\n\n.element-delete {\n    display: inline-block;\n    background-image: url(${w});\n    background-size: cover;\n    width: 40px;\n    height: 40px;\n    transition: background-image 1s;\n    transition: transform 500ms;\n}\n\n.element-delete:hover {\n    background-image: url(${C});\n    background-size: cover;\n    display: inline-block;\n    width: 40px;\n    height: 40px;\n    transform: rotate(360deg);\n    transition: background-image 1s;\n    transition: transform 500ms;\n    opacity: 0.5;\n    cursor: pointer;\n}\n\n.form-error {\n    position: absolute;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    text-align: center;\n\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n\n    border-radius: 10px;\n    width: 380px;\n    height: 180px;\n    padding: 15px;\n\n    background-color: white;\n    border: 1px solid;\n\n    opacity: 1;\n    transition-property: all;\n    transition-duration: 100ms;\n    transition-timing-function: ease-in-out;\n\n    z-index: 3;\n}\n\n.form-error-title {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    width: 100%;\n    margin-bottom: 15px;\n}\n\n.error-description {\n    text-align: justify;\n    margin-bottom: 15px;\n}\n\n.title-error {\n    text-align: center;\n    font-size: 24px;\n    font-weight: bold;\n}\n\n.form-close {\n    content: "";\n    background-image: url(${S});\n    background-size: cover;\n    width: 40px;\n    height: 40px;\n    cursor: pointer;\n}\n\n.textarea-form-error {\n    width: 100%;\n    min-height: 25px;\n    border: 1px solid;\n    padding: 5px;\n    resize: none;\n}\n\n.btn-send-coords {\n    font-size: 20px;\n    width: 100%;\n    border: 0;\n    border-radius: 5px;\n    background: #4676D7;\n    color: #fff;\n    padding: 8px 16px;\n    font-size: 16px;\n    margin-top: 20px;\n    cursor: pointer;\n}\n\n.check-mark {\n    background: url(${q});\n    background-size: cover;\n    background-repeat: no-repeat;\n    border: none;\n    z-index: 2;\n    transition: transform 1s;\n}\n\n.check-mark:hover {\n    transform: rotate(360deg);\n    background-size: cover;\n    background-repeat: no-repeat;\n    cursor: pointer;\n    transition: transform 1s;\n}\n\n.cross {\n    background: url(${A});\n    background-size: cover;\n    background-repeat: no-repeat;\n    border: none;\n    z-index: 2;\n    transition: transform 1s;\n}\n\n.cross:hover {\n    transform: rotate(360deg);\n    background-size: cover;\n    background-repeat: no-repeat;\n    cursor: pointer;\n    transition: transform 1s;\n}\n\n.timer {\n    margin-right: 10px;\n    background-color: white;\n}\n\n.video {\n    display: block;\n    width: 330px;\n    height: 250px;\n    margin: auto;\n}`,""]);const M=v},16:(e,t,n)=>{n.d(t,{A:()=>V});var o=n(601),i=n.n(o),r=n(314),a=n.n(r),s=n(128),l=n(254),c=n(417),d=n.n(c),m=new URL(n(43),n.b),p=new URL(n(532),n.b),u=new URL(n(145),n.b),g=new URL(n(508),n.b),h=new URL(n(549),n.b),y=new URL(n(484),n.b),f=new URL(n(946),n.b),b=new URL(n(323),n.b),v=new URL(n(432),n.b),x=new URL(n(444),n.b),L=new URL(n(152),n.b),k=new URL(n(333),n.b),E=new URL(n(553),n.b),w=new URL(n(252),n.b),C=new URL(n(337),n.b),S=a()(i());S.i(s.A),S.i(l.A);var q=d()(m),A=d()(p),M=d()(u),$=d()(g),U=d()(h),T=d()(y),R=d()(f),j=d()(b),z=d()(v),O=d()(x),I=d()(L),F=d()(k),N=d()(E),B=d()(w),D=d()(C);S.push([e.id,`* {\n    margin: 0;\n    padding: 0;\n}\n\n.no-click-element {\n    height: 100vh;\n    width: 100%;\n    position: absolute;\n    z-index: 5;\n}\n\n/*HEADER*/\n\n.chat-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    border: 1px solid black;\n    padding: 15px;\n}\n\n.profile {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n}\n\n.profile-photo {\n    background-image: url(${q});\n    background-size: cover;\n    background-repeat: no-repeat;\n    width: 42px;\n    height: 43px;\n    margin-right: 20px;\n}\n\n.profile-name {\n    font-size: 20px;\n    font-family: "Oswald";\n}\n\n.time-was-online {\n    font-family: "Nunito";\n}\n\n.connection-to-server {\n    animation-name: connection-animation;\n    animation-duration: 1s;\n    animation-iteration-count: infinite;\n    animation-direction: alternate;\n\n    content: '';\n    margin-left: 10px;\n    width: 20px;\n    height: 20px;\n    border-radius: 20px;\n    background-color: red;\n}\n\n.connection-to-server-result {\n    font-size: 15px;\n    font-family: "Nunito";\n    margin-left: 20px;\n}\n\n@keyframes connection-animation {\n\n    from {\n        opacity: 1;\n    }\n\n    25% {\n        opacity: 0.8;\n    }\n\n    50% {\n        opacity: 0.6;\n    }\n\n    75% {\n        opacity: 0.4;\n    }\n\n    100% {\n        opacity: 0.2;\n    }\n\n    to {\n        opacity: 0;\n    }\n}\n\n.interaction-menu {\n    position: relative;\n}\n\n.icon {\n    position: relative;\n    display: inline-block;\n    width: 40px;\n    height: 40px;\n    background-size: 287px;\n    background-repeat: no-repeat;\n    background-size: cover;\n    background-repeat: no-repeat;\n    cursor: pointer;\n}\n\n.interaction-menu>.icon {\n    margin-right: 20px;\n    cursor: pointer;\n}\n\n.search {\n    background-image: url(${A});\n    transition: background-image 90ms;\n}\n\n.search:hover {\n    background-image: url(${M});\n    transition: background-image 90ms;\n}\n\n.menu {\n    position: relative;\n    background-image: url(${$});\n    transition: background-image 90ms;\n}\n\n.menu:hover {\n    background-image: url(${U});\n    transition: background-image 90ms;\n}\n\n.container-menu {\n    min-width: 210px;\n    position: absolute;\n    right: 0;\n    top: 0;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    background-color: white;\n    border: 1px solid;\n    border-radius: 20px;\n    visibility: hidden;\n    opacity: 0;\n    transition: opacity 500ms;\n    z-index: 1;\n}\n\n.menu-items {\n    margin-top: 35px;\n    text-align: center;\n}\n\n.menu-item {\n    padding: 0 13px;\n    font-size: 17px;\n    font-family: "Nunito";\n    text-align: center;\n    margin-bottom: 20px;\n    cursor: pointer;\n}\n\n.menu-item:hover {\n    opacity: 0.5;\n}\n\n.close-menu {\n    background-image: url(${T});\n    width: 30px;\n    height: 30px;\n    background-size: cover;\n    background-repeat: no-repeat;\n    cursor: pointer;\n    position: absolute;\n    top: 5px;\n    right: 5px;\n}\n\n.close-menu:hover {\n    opacity: 0.5;\n}\n\n\n/*HEADER*/\n\n/*MAIN*/\n\n.main {\n    height: 100vh;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.chat {\n    display: flex;\n    flex-direction: column;\n    width: 75%;\n    min-height: 650px;\n    margin: auto;\n    border: 1px solid black;\n    margin-top: 20px;\n}\n\n.chat-main {\n    position: relative;\n    width: 100%;\n    height: 520px;\n    background-color: #075139;\n    border: 1px solid black;\n    overflow-y: scroll;\n}\n\n.chat-main::-webkit-scrollbar {\n    width: 15px;\n}\n\n.chat-main::-webkit-scrollbar-track {\n    background: #075139;\n}\n\n.chat-main::-webkit-scrollbar-thumb {\n    background-color: black;\n    border-radius: 20px;\n}\n\n.all-messages {\n    padding-top: 50px;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    background-color: white;\n    border: 1px solid;\n    border-radius: 20px;\n    visibility: hidden;\n    opacity: 0;\n    transition: opacity 500ms;\n    z-index: 1;\n    width: 220px;\n    transform: translate(-50%, -50%);\n    position: fixed;\n}\n\n.close-all-messages {\n    background-image: url(${T});\n    width: 30px;\n    height: 30px;\n    background-size: cover;\n    background-repeat: no-repeat;\n    cursor: pointer;\n    position: absolute;\n    top: 10px;\n    right: 5px;\n    transition: transform 1s;\n}\n\n.close-all-messages:hover {\n    transform: rotate(180deg);\n    transition: transform 1s;\n    opacity: 0.5;\n}\n\n.close-menu:hover {\n    transform: rotate(180deg);\n    transition: transform 1s;\n    opacity: 0.5;\n}\n\n.type-message {\n    color: white;\n    display: block;\n    padding: 0 13px;\n    font-size: 17px;\n    font-family: "Nunito";\n    text-align: center;\n    margin-bottom: 20px;\n    cursor: pointer;\n    width: 80%;\n    background-color: #2b9ec8;\n    padding: 10px;\n    border-radius: 10px;\n}\n\n.type-message:hover {\n    opacity: 0.5;\n}\n\n/*MAIN*/\n\n/*FOOTER*/\n.chat-footer {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    height: 10%;\n    border: 1px solid black;\n    padding: 0px 30px;\n}\n\n.form-send-file {\n    display: flex;\n    justify-content: center;\n    width: 45px;\n    padding: 5px;\n    transition: width 1s;\n}\n\n.form-send-file-loaded {\n    width: 200px;\n    justify-content: space-between;\n    transition: width 1s;\n}\n\n.send-file {\n    background-image: url(${R});\n    background-size: cover;\n    background-repeat: no-repeat;\n    cursor: pointer;\n    transition: background-image 90ms;\n    transition: transform 250ms;\n}\n\n.send-file:hover {\n    transform: rotate(180deg);\n    background-size: cover;\n    background-repeat: no-repeat;\n    cursor: pointer;\n    transition: transform 250ms;\n}\n\n.send-file-sticker {\n\n    /* content: ''; */\n    display: block;\n    width: 18px;\n    height: 18px;\n    text-align: center;\n    font-size: 16px;\n    color: white;\n    background-color: #0000ff9c;\n    border-radius: 10px;\n    margin-left: -10px;\n    visibility: hidden;\n}\n\n.sticker-animation {\n    animation-name: sticker-animation;\n    animation-duration: 1s;\n    transition: ease-out;\n    position: absolute;\n    top: 20px;\n    left: 45px;\n    width: 18px;\n    height: 18px;\n    border-radius: 10px;\n    content: "";\n    background-repeat: no-repeat;\n    object-fit: cover;\n}\n\n@keyframes sticker-animation {\n\n    from {\n        top: -20px;\n        left: 45px;\n        opacity: 1;\n    }\n\n    25% {\n        top: -40px;\n        left: 45px;\n        opacity: 0.8;\n    }\n\n    50% {\n        top: -53px;\n        left: 0px;\n        opacity: 0.6;\n    }\n\n    75% {\n        top: -126px;\n        left: 85px;\n        opacity: 0.4;\n    }\n\n\n    100% {\n        top: -180px;\n        left: 5px;\n        opacity: 0.2;\n\n    }\n\n    to {\n        top: -200px;\n        left: 45px;\n        opacity: 0;\n    }\n}\n\n.form-btn-submit {\n    font-size: 14px;\n    font-family: "Nunito";\n    text-align: center;\n    border-radius: 10px;\n    border: none;\n    background-color: purple;\n    color: white;\n    cursor: pointer;\n    /* display: none; */\n    width: 0px;\n    transition: width 1s;\n}\n\n.form-btn-submit-loaded {\n    display: block;\n    width: 120px;\n    transition: width 1s;\n}\n\n.form-btn-submit:hover {\n    opacity: 0.5;\n}\n\n.write-message {\n    display: flex;\n    width: 75%;\n    height: 70px;\n    padding: 0 20px;\n    font-size: 20px;\n    border: none;\n    resize: none;\n    font-family: "Oswald";\n    letter-spacing: 5px;\n    line-height: 65px;\n    outline: none;\n}\n\n.write-message-input {\n    position: absolute;\n    left: 290px;\n    width: 840px;\n    height: 70px;\n    opacity: 0;\n    cursor: text;\n    /* visibility: hidden; */\n}\n\n\n.interactive-message>.icon {\n    margin-right: 10px;\n    background-size: cover;\n    background-repeat: no-repeat;\n    cursor: pointer;\n}\n\n.interactive-message {\n    display: flex;\n    position: relative;\n    justify-content: center;\n    align-content: center;\n    align-items: center;\n}\n\n.send-smile {\n    background-image: url(${j});\n    transition: background-image 90ms;\n}\n\n.smile-container {\n    position: absolute;\n    top: -165%;\n    left: 20%;\n    transform: translate(-50%, -50%);\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n    text-align: center;\n    width: 160px;\n    background-color: white;\n    border: 1px solid;\n    visibility: hidden;\n    opacity: 0;\n    transition: opacity 200ms;\n}\n\n.emoji {\n    width: 40px;\n    cursor: pointer;\n}\n\n.emoji:hover {\n    opacity: 0.5;\n}\n\n.send-smile:hover {\n    background-image: url(${z});\n    transition: background-image 90ms;\n}\n\n/* .input-file {\n    display: none;\n} */\n\n.send_,\n.timer_,\n.stop_ {\n    visibility: hidden;\n    display: none;\n}\n\n.send-voice-message {\n    background-image: url(${O});\n    transition: background-image 100ms;\n}\n\n.send-voice-message:hover {\n    background-image: url(${I});\n    transition: background-image 100ms;\n}\n\n.send-video {\n    background-image: url(${F});\n    transition: background-image 90ms;\n}\n\n.send-video:hover {\n    background-image: url(${N});\n    transition: background-image 90ms;\n}\n\n.send-text-message {\n    background-image: url(${B});\n    transition: background-image 250ms;\n}\n\n.send-text-message:hover {\n    background-image: url(${D});\n    transition: background-image 100ms;\n}\n\n/*FOOTER*/\n\n.hidden {\n    display: none;\n}`,""]);const V=S},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",o=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),o&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),o&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,o,i,r){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(o)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(a[l]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);o&&a[d[0]]||(void 0!==r&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=r),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),i&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=i):d[4]="".concat(i)),t.push(d))}},t}},417:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},601:e=>{e.exports=function(e){return e[1]}},72:e=>{var t=[];function n(e){for(var n=-1,o=0;o<t.length;o++)if(t[o].identifier===e){n=o;break}return n}function o(e,o){for(var r={},a=[],s=0;s<e.length;s++){var l=e[s],c=o.base?l[0]+o.base:l[0],d=r[c]||0,m="".concat(c," ").concat(d);r[c]=d+1;var p=n(m),u={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)t[p].references++,t[p].updater(u);else{var g=i(u,o);o.byIndex=s,t.splice(s,0,{identifier:m,updater:g,references:1})}a.push(m)}return a}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var r=o(e=e||[],i=i||{});return function(e){e=e||[];for(var a=0;a<r.length;a++){var s=n(r[a]);t[s].references--}for(var l=o(e,i),c=0;c<r.length;c++){var d=n(r[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}r=l}}},659:e=>{var t={};e.exports=function(e,n){var o=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,i&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},310:(e,t,n)=>{e.exports=n.p+"9d7a6e03c6e3ed49c7ac.ttf"},687:(e,t,n)=>{e.exports=n.p+"31bce04a1ae8549b1464.ttf"},17:(e,t,n)=>{e.exports=n.p+"59d1508359e84c235381.png"},946:(e,t,n)=>{e.exports=n.p+"1ce750e007a625ae06ed.svg"},484:(e,t,n)=>{e.exports=n.p+"15eb07f1af2966fd019d.svg"},727:(e,t,n)=>{e.exports=n.p+"71c6ac26065f7ca500be.png"},724:(e,t,n)=>{e.exports=n.p+"17509ad18308153ba787.svg"},13:(e,t,n)=>{e.exports=n.p+"2e06ab9476c3608118a0.svg"},432:(e,t,n)=>{e.exports=n.p+"4956a07feec8d4e2ec25.svg"},323:(e,t,n)=>{e.exports=n.p+"709a6ac6f69643f8fd12.svg"},508:(e,t,n)=>{e.exports=n.p+"096ae4718d76fd16c836.svg"},549:(e,t,n)=>{e.exports=n.p+"e2522ca22ef77e961572.svg"},444:(e,t,n)=>{e.exports=n.p+"818b11006f53311a5d57.svg"},152:(e,t,n)=>{e.exports=n.p+"a6f07f99a4e6eef6812b.svg"},43:(e,t,n)=>{e.exports=n.p+"31aad4801d72411029cd.png"},23:(e,t,n)=>{e.exports=n.p+"3bd7c3a1b74e2de46e05.svg"},145:(e,t,n)=>{e.exports=n.p+"1c751e03da2451211b1e.svg"},532:(e,t,n)=>{e.exports=n.p+"25ebdd29174c4d609bbf.svg"},50:(e,t,n)=>{e.exports=n.p+"1ff037d5b250fd09a416.png"},337:(e,t,n)=>{e.exports=n.p+"86433a8e2208fbf8e7f7.svg"},987:(e,t,n)=>{e.exports=n.p+"aa781e00805b6515669d.png"},252:(e,t,n)=>{e.exports=n.p+"d2668a915b3d9b349ea3.svg"},573:(e,t,n)=>{e.exports=n.p+"7fb939f246bc372bfb9a.png"},333:(e,t,n)=>{e.exports=n.p+"44b86d3c6bece111ad24.svg"},553:(e,t,n)=>{e.exports=n.p+"1680815031e6f85c4fa8.svg"}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var r=t[o]={id:o,exports:{}};return e[o](r,r.exports,n),r.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var o=t.getElementsByTagName("script");if(o.length)for(var i=o.length-1;i>-1&&(!e||!/^http(s?):/.test(e));)e=o[i--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.b=document.baseURI||self.location.href,n.nc=void 0,(()=>{var e=n(72),t=n.n(e),o=n(825),i=n.n(o),r=n(659),a=n.n(r),s=n(56),l=n.n(s),c=n(540),d=n.n(c),m=n(113),p=n.n(m),u=n(16),g={};g.styleTagTransform=p(),g.setAttributes=l(),g.insert=a().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=d(),t()(u.A,g),u.A&&u.A.locals&&u.A.locals;class h{constructor(e){this.coords=e}createtUlList(){let e=document.querySelector(".messages-container"),t=document.querySelector(".chat-main");e||(e=document.createElement("ul")),e.classList.add("list-msg"),t.appendChild(e)}createMsg(e){let t=document.querySelector(".list-msg"),n=document.createElement("li"),o=document.createElement("div"),i=document.createElement("span"),r=document.createElement("span"),a=document.createElement("p"),s=document.createElement("div"),l=document.createElement("span"),c=document.createElement("span");return n.setAttribute("type","txt"),n.setAttribute("id",this.createId()),n.classList.add("msg"),o.classList.add("element-header"),i.classList.add("element-date"),r.classList.add("element-time"),a.classList.add("element-content"),s.classList.add("element-footer"),l.classList.add("element-geolocation"),c.classList.add("element-delete"),a.textContent=e,l.textContent=`[${this.coords[0]}, ${this.coords[1]}]`,o.appendChild(i),o.appendChild(r),n.appendChild(o),n.appendChild(a),s.appendChild(l),s.appendChild(c),n.appendChild(s),t.append(n),n}createLink(e){let t=document.querySelector(".list-msg"),n=document.createElement("li"),o=document.createElement("div"),i=document.createElement("span"),r=document.createElement("span"),a=document.createElement("a"),s=document.createElement("p"),l=document.createElement("div"),c=document.createElement("span"),d=document.createElement("span");return n.setAttribute("type","link"),n.setAttribute("id",this.createId()),a.setAttribute("href",e),n.classList.add("msg"),o.classList.add("element-header"),i.classList.add("element-date"),r.classList.add("element-time"),a.classList.add("element-link"),s.classList.add("element-content"),l.classList.add("element-footer"),c.classList.add("element-geolocation"),d.classList.add("element-delete"),s.textContent=e,c.textContent=`[${this.coords[0]}, ${this.coords[1]}]`,o.appendChild(i),o.appendChild(r),n.appendChild(o),n.appendChild(a),a.appendChild(s),l.appendChild(c),l.appendChild(d),n.appendChild(l),t.append(n),n}createFile(e,t){let n=document.querySelector(".list-msg"),o=document.createElement("li"),i=document.createElement("div"),r=document.createElement("span"),a=document.createElement("span"),s=document.createElement("div"),l=document.createElement("a"),c=document.createElement("p"),d=document.createElement("div"),m=document.createElement("span"),p=document.createElement("span");return o.setAttribute("type","file"),o.setAttribute("id",this.createId()),l.setAttribute("href",t),l.download=e.name,o.classList.add("msg"),i.classList.add("element-header"),r.classList.add("element-date"),a.classList.add("element-time"),s.classList.add("element-content-container"),l.classList.add("element-content"),c.classList.add("element-save-content"),d.classList.add("element-footer"),m.classList.add("element-geolocation"),p.classList.add("element-delete"),l.textContent=e.name,m.textContent=`[${this.coords[0]}, ${this.coords[1]}]`,i.appendChild(r),i.appendChild(a),s.appendChild(l),s.appendChild(c),d.appendChild(m),d.appendChild(p),o.appendChild(i),o.appendChild(s),o.appendChild(d),n.append(o),o}createVideo(e){let t=document.querySelector(".list-msg"),n=document.createElement("li"),o=document.createElement("video"),i=document.createElement("div"),r=document.createElement("span"),a=document.createElement("span"),s=document.createElement("p"),l=document.createElement("div"),c=document.createElement("span"),d=document.createElement("span");return n.setAttribute("type","video"),n.setAttribute("id",this.createId()),n.classList.add("msg"),o.classList.add("video"),o.controls=!0,i.classList.add("element-header"),r.classList.add("element-date"),a.classList.add("element-time"),s.classList.add("element-content"),l.classList.add("element-footer"),c.classList.add("element-geolocation"),d.classList.add("element-delete"),s.textContent=e,c.textContent=`[${this.coords[0]}, ${this.coords[1]}]`,i.appendChild(r),i.appendChild(a),n.appendChild(i),n.appendChild(o),l.appendChild(c),l.appendChild(d),n.appendChild(l),t.append(n),n}createAudio(e){let t=document.querySelector(".list-msg"),n=document.createElement("li"),o=document.createElement("audio"),i=document.createElement("div"),r=document.createElement("span"),a=document.createElement("span"),s=document.createElement("p"),l=document.createElement("div"),c=document.createElement("span"),d=document.createElement("span");return n.setAttribute("type","audio"),n.setAttribute("id",this.createId()),n.classList.add("msg"),o.classList.add("audio"),o.controls=!0,i.classList.add("element-header"),r.classList.add("element-date"),a.classList.add("element-time"),s.classList.add("element-content"),l.classList.add("element-footer"),c.classList.add("element-geolocation"),d.classList.add("element-delete"),s.textContent=e,c.textContent=`[${this.coords[0]}, ${this.coords[1]}]`,i.appendChild(r),i.appendChild(a),n.appendChild(i),n.appendChild(o),l.appendChild(c),l.appendChild(d),n.appendChild(l),t.append(n),n}createAttribute(e){let t=e.querySelector(".element-date"),n=e.querySelector(".element-time"),o=new Date,i=o.getFullYear(),r=o.getMonth()+1,a=o.getDate(),s=o.getHours(),l=o.getMinutes(),c=o.getSeconds();1==String(r).length&&(r="0"+r),1==String(a).length&&(r="0"+a),1==String(s).length&&(s="0"+s),1==String(l).length&&(l="0"+l),1==String(c).length&&(c="0"+c),t.textContent=a+"."+r+"."+i,n.textContent=s+":"+l+":"+c}createId=()=>Math.random().toString(36).slice(2)}let y="http://localhost:3030";const f=async e=>{const t={id:e.getAttribute("id"),type:e.getAttribute("type"),date:e.querySelector(".element-date").textContent,time:e.querySelector(".element-time").textContent,content:e.querySelector(".element-content").textContent,coords:e.querySelector(".element-geolocation").textContent};let n=y+"/sendMessage";const o=JSON.stringify(t),i=await fetch(n,{headers:{"Content-Type":"application/json"},method:"POST",body:o});console.log(i)},b=async e=>{let t,n,o=y+"/delete",i=e.target.closest(".msg"),r=i.querySelector(".element-content"),a=i.getAttribute("type"),s=i.querySelector(".audio"),l=i.querySelector(".video");s?t=".mp3":l&&(t=".mp4"),["txt","link","audio","video"].includes(a)?n="":"file"==a&&(n=r.textContent);let c={id:i.id,nameFile:n,format:t},d=JSON.stringify(c);const m=await fetch(o,{headers:{"Content-Type":"application/json"},method:"DELETE",body:d});i.remove(),console.log(m)},v=async(e,t)=>{let n,o=e.getAttribute("id"),i=e.getAttribute("type"),r=e.querySelector(".element-date").textContent,a=e.querySelector(".element-time").textContent,s=e.querySelector(".element-geolocation").textContent,l=e.querySelector(".audio"),c=e.querySelector(".video");l?n=".mp3":c&&(n=".mp4");let d=new File([t],`${o}`,{type:n});const m=new FormData;m.append("file",d);const p={id:o,type:i,date:r,time:a,coords:s,format:n},u=JSON.stringify(p);m.append("data",u);let g=y+"/sendMediaMessage";const h=await fetch(g,{method:"POST",body:m});return console.log(h),h},x=async e=>{let t=e.target.closest(".msg"),n=t.querySelector(".element-content");console.log(e.target);let o=t.getAttribute("id"),i=y+`/downloadFile?id=${o}`;const r=await fetch(i,{headers:{"Content-Type":"application/json"},method:"GET"}).then((e=>e.blob()));let a=URL.createObjectURL(r);return n.setAttribute("href",a),n.download=n.textContent,n.removeEventListener("click",x),n.click(),console.log(r),r},L=async e=>{let t,n=e.target.closest(".msg"),o=n.querySelector(".audio"),i=n.querySelector(".video");t=o||i,t=i||o;let r=n.getAttribute("id"),a=y+`/downloadMediaMessage?id=${r}`;console.log("ждем ответ сервера ");const s=await fetch(a,{headers:{"Content-Type":"application/json"},method:"GET"}).then((e=>(console.log("получили ответ"),e.blob())));console.log("создаем ссылку");let l=URL.createObjectURL(s);return t.setAttribute("src",l),console.log("поставили src"),console.log(s),s},k=e=>{if(console.log("loadfile "+e),0==e.srcElement.files.length)return;let t=document.getElementById("write-message-input"),n=document.querySelector(".form-send-file"),o=document.querySelector(".send-file-sticker"),i=document.querySelector(".form-btn-submit");n.classList.add("form-send-file-loaded"),i.classList.add("form-btn-submit-loaded"),o.style.visibility="visible",t.style.display="none",o.textContent++},E=e=>{let t=e.dataTransfer.files[0].name,n=(e.dataTransfer.files[0].type,document.getElementById("img-input")),o=document.getElementById("write-message-input"),i=new DataTransfer,r=new File([e.dataTransfer.files[0]],`${t}`),a=new Event("change");i.items.add(r),n.files=i.files,n.dispatchEvent(a),o.style.display="none"},w=e=>{if(![e].join("").includes(","))return void alert("Не правильно введены координаты!");let t=e.split(","),n=[];for(const e of t){let t=e.replaceAll(" ","").replaceAll("[","").replaceAll("]","");n.push(t)}return console.log(n),n};let C,S,q,A,M,$,U,T,R,j,z=document.querySelector(".send-voice-message"),O=document.querySelector(".send-video"),I=document.querySelector(".send-smile"),F=document.querySelector(".send_"),N=document.querySelector(".timer_"),B=document.querySelector(".stop_");const D=async function(){return new Promise(((e,t)=>{navigator.geolocation.getCurrentPosition((t=>{const{latitude:n,longitude:o}=t.coords;C=[n,o],e(C)}),(async function(){V();let t=document.querySelector(".form-error"),n=document.querySelector(".btn-send-coords"),o=document.querySelector(".form-close"),i=document.querySelector(".textarea-form-error");o.addEventListener("click",(async()=>{alert("Введите координаты!")})),n.addEventListener("click",(async n=>{n.preventDefault();let o=await i.value;if(console.log("данные получили"),!o||" "==o||"\n"==o)return console.log("Координат нет!"),void alert("Координат нет!");w(o)&&(o=w(o),C=o,e(C),t.remove(),console.log("данные коректные"))}))}))}))},V=()=>{document.body.insertAdjacentHTML("afterbegin",' <form class="form-error">\n              <div class="form-error-title">\n                  <div class="title-error">Что то пошло не так :(</div>\n                  <div class="form-close"></div>\n              </div>\n              <div class="error-description">К сожалению, нам не удалось опрделить ваше местоположение.\n              Пожалуйста, дайте разрешение на использование геолокации, либо введите координаты вручную.\n              Широта и долгота через запятую.\n              </div>\n              <textarea class="textarea-form-error" placeholder="Ваши координаты"></textarea>\n              <button class="btn-send-coords">Отправить</button>\n          </form>')},_=async function(e){if(e instanceof KeyboardEvent){if("Enter"!==e.key)return;e.preventDefault()}C||await D();let t=document.querySelector(".write-message"),n=document.querySelector(".send-text-message"),o=t.value;if(""==o||o.match(/^ /g))return;if(o.toString().match(/^http.{0,}/g)){let e=new h(C);e.createtUlList();let i=e.createLink(o);return e.createAttribute(i),i.querySelector(".element-delete").addEventListener("click",b),t.value="",n.addEventListener("click",P),n.removeEventListener("click",_),n.classList.remove("send-text-message"),n.classList.add("send-voice-message"),void f(i)}let i=new h(C);i.createtUlList();let r=i.createMsg(o);i.createAttribute(r),r.querySelector(".element-delete").addEventListener("click",b),t.value="",n.addEventListener("click",P),n.removeEventListener("click",_),n.classList.remove("send-text-message"),n.classList.add("send-voice-message"),f(r)},P=async e=>{C||await D(),await async function(){try{T=await navigator.mediaDevices.getUserMedia({audio:!0}),U=new h(C),U.createtUlList();let e=U.createAudio(),t=e.querySelector(".audio");t.classList.add("recording"),U.createAttribute(e),M=new MediaRecorder(T);const n=[];M.start(),M.addEventListener("start",(()=>{console.log("start")})),M.addEventListener("dataavailable",(e=>{n.push(e.data)})),M.addEventListener("stop",(e=>{const o=new Blob(n);t.src=URL.createObjectURL(o),j=URL.createObjectURL(o),R&&v(t.parentElement,o)})),q=!0}catch(e){console.log(e),alert("Предоставьте доступ к микрофону, чтобы записывать аудио-сообщения!")}}(),q&&(X(),document.querySelector(".recording").parentElement.querySelector(".element-delete").style.display="none",F.addEventListener("click",H),B.addEventListener("click",J),Y())},H=async function(){console.log("send audio"),Z(),M.stop(),T.getTracks().forEach((e=>e.stop()));let e=document.querySelector(".recording"),t=e.parentElement.querySelector(".element-delete");t.style.display="block",e.classList.remove("recording"),F.removeEventListener("click",H),B.removeEventListener("click",J),t.addEventListener("click",b),R=!0,W()},J=async function(){console.log("delete audio"),M.stop(),T.getTracks().forEach((e=>e.stop()));let e=document.querySelector(".recording");e.parentNode.remove(),e.remove(),F.removeEventListener("click",H),B.removeEventListener("click",J),R=!1,Z(),W()},G=async()=>{C||await D(),await async function(){try{T=await navigator.mediaDevices.getUserMedia({video:!0}),$=new h(C),$.createtUlList();let e=$.createVideo(),t=e.querySelector(".video");t.classList.add("recording"),$.createAttribute(e),M=new MediaRecorder(T);const n=[];M.start(),M.addEventListener("start",(()=>{console.log("start")})),M.addEventListener("dataavailable",(e=>{n.push(e.data)})),M.addEventListener("stop",(()=>{const e=new Blob(n);t.src=URL.createObjectURL(e),j=URL.createObjectURL(e),R&&v(t.parentElement,e)})),S=!0}catch(e){console.log(e),alert("Предоставьте доступ к камере, чтобы записывать видео-сообщения!")}}(),S&&(X(),document.querySelector(".recording").parentElement.querySelector(".element-delete").style.display="none",F.addEventListener("click",K),B.addEventListener("click",Q),Y())},K=async function(){console.log("send video"),Z(),M.stop(),T.getTracks().forEach((e=>e.stop()));let e=document.querySelector(".recording"),t=e.parentElement.querySelector(".element-delete");t.style.display="block",e.classList.remove("recording"),F.removeEventListener("click",K),B.removeEventListener("click",Q),t.addEventListener("click",b),R=!0,W()},Q=async function(e){console.log("delete video"),M.stop(),T.getTracks().forEach((e=>e.stop()));let t=document.querySelector(".recording");t.parentNode.remove(),t.remove(),F.removeEventListener("click",K),B.removeEventListener("click",Q),R=!1,Z(),W()},Y=()=>{let e=document.querySelector(".timer"),t=0,n=0;e.textContent=`0${t}:0${n}`,A=setInterval((()=>{e.textContent=`${t}:${n++}`,1==String(n).length&&1==String(t).length?e.textContent=`0${t}:0${n}`:String(n).length>1&&1==String(t).length?e.textContent=`0${t}:${n}`:1==String(n).length&&String(t).length>1?e.textContent=`${t}:0${n}`:String(n).length>1&&String(t).length>1&&(e.textContent=`${t}:${n}`),n>59&&(n="00",t+=1,1==String(t).length?e.textContent=`0${t}:${n}`:e.textContent=`${t}:${n}`)}),1e3)},W=()=>{clearInterval(A),N.classList.remove("timer"),N.textContent=""},X=()=>{z.style.display="none",O.style.display="none",I.style.display="none",F.classList.add("check-mark"),F.classList.add("icon"),B.classList.add("cross"),B.classList.add("icon"),N.classList.add("timer"),F.style.display="inline-block",B.style.display="inline-block",N.style.display="inline-block",F.style.visibility="visible",B.style.visibility="visible",N.style.visibility="visible"},Z=()=>{z.style.display="inline-block",O.style.display="inline-block",I.style.display="inline-block",F.classList.remove("check-mark"),F.classList.remove("icon"),B.classList.remove("cross"),B.classList.remove("icon"),N.classList.remove("timer"),F.style.display="none",B.style.display="none",N.style.display="none",F.style.visibility="hidden",B.style.visibility="hidden",N.style.visibility="hidden"},ee=e=>{e.target.parentElement.closest(".msg").querySelector(".element-content").click()};class te{constructor(e,t,n,o,i,r,a){this.containerMenu=e,this.allMessages=t,this.iconSendVoiceMessage=n,this.iconSendVideoMessage=o,this.smileMenu=i,this.timer=r,this.textArea=a}headerMenuVisible=()=>{this.containerMenu.style.visibility="visible",this.containerMenu.style.opacity="1"};headerMenuHidden=()=>{this.containerMenu.style.opacity="0",this.containerMenu.style.visibility="hidden"};showAllMessagesBlock=()=>{document.querySelector(".close-menu").click(),this.allMessages.style.visibility="visible",this.allMessages.style.opacity="1"};closeAllMessagesBlock=()=>{this.allMessages.style.opacity="0",this.allMessages.style.visibility="hidden"};changeMicroToMessage=e=>{let t=document.querySelector(".send-text-message");if(!("deleteContentBackward"!=e.inputType&&"deleteContentForward"!=e.inputType&&"deleteByCut"!=e.inputType||""!=this.textArea.value&&t))return this.iconSendVoiceMessage.classList.remove("send-text-message"),this.iconSendVoiceMessage.classList.add("send-voice-message"),t.addEventListener("click",P),void t.removeEventListener("click",_);""==this.textArea.value&&t&&(this.iconSendVoiceMessage.classList.remove("send-text-message"),t.addEventListener("click",P),t.removeEventListener("click",_)),this.iconSendVoiceMessage.classList.add("send-text-message"),this.iconSendVoiceMessage.classList.remove("send-voice-message"),t=document.querySelector(".send-text-message"),t.addEventListener("click",_),t.removeEventListener("click",P)};showSmileMenu=()=>{this.smileMenu.style.opacity="1",this.smileMenu.style.visibility="visible",this.timer=setTimeout(this.closeMenuSmile,2e3)};closeMenuSmile=()=>{this.smileMenu.style.opacity="0",this.smileMenu.style.visibility="hidden"};listenerEmojiClick=e=>{clearTimeout(this.timer),this.textArea.value+=e.target.textContent,this.changeMicroToMessage(e),this.smileMenu.style.opacity="0",this.smileMenu.style.visibility="hidden"};listenerEmojiMouseOver=()=>{clearTimeout(this.timer)};listenerEmojiMouseOut=()=>{this.timer=setTimeout(this.closeMenuSmile,2e3)};clearChat=()=>{(async e=>{let t=y+"/clearAll";const n=await fetch(t,{headers:{"Content-Type":"application/json"},method:"DELETE"});console.log(n)})();let e=document.querySelectorAll(".msg");document.querySelector(".close-menu").click();for(const t of e)t.remove()};filterMessages=e=>{let t=document.querySelector(".chat-main"),n=document.querySelector(".allMsgs");document.querySelector(".close-all-messages").click(),n.click();let o=document.querySelector(".messages-container"),i=e.target.getAttribute("type"),r=o.querySelectorAll(".msg");o.querySelectorAll(`[type=${i}]`);for(const e of r)e.getAttribute("type")!==i&&(e.style.display="none",e.classList.add("hidden"));if(null==i)for(const e of r)e.style.display="block",e.classList.contains("hidden")&&e.classList.remove("hidden");t.scrollTo(screenTop,innerHeight)};sendFile=e=>{console.log("send file"),e.preventDefault();let t=e.target,n=document.querySelector(".send-file-sticker"),o=document.querySelector(".form-btn-submit"),i=document.getElementById("write-message-input");t.classList.remove("form-send-file-loaded"),o.classList.remove("form-btn-submit-loaded"),n.classList.add("sticker-animation"),n.addEventListener("animationend",(()=>{n.style.visibility="hidden",n.classList.remove("sticker-animation"),n.textContent=""}));let r=e.srcElement[0].files[0],a=e.srcElement[0].files;if(!r)return;let s=new Blob([r]),l=URL.createObjectURL(s);i.style.display="block",(async(e,t)=>{C||await D();let n=new h(C);n.createtUlList();let o=n.createFile(e[0],t);n.createAttribute(o);let i=o.querySelector(".element-save-content");o.querySelector(".element-delete").addEventListener("click",b),i.addEventListener("click",ee),(async(e,t)=>{let n=document.querySelector(".form-send-file"),o=t[0];const i=new FormData;i.append("file_",o);let r=y+"/sendFile",a=e.getAttribute("id"),s=e.getAttribute("type"),l=e.querySelector(".element-date").textContent,c=e.querySelector(".element-time").textContent,d=e.querySelector(".element-content").textContent,m=e.querySelector(".element-content").getAttribute("href"),p=e.querySelector(".element-geolocation").textContent,u={id:a,type:s,date:l,time:c,name:d,link:m,format:t[0].type,coords:p};const g=JSON.stringify(u);i.append("data",g);const h=await fetch(r,{method:"POST",body:i});n.reset(),console.log(h)})(o,e)})(a,l)}}class ne{constructor(){}crtUlList(){let e=document.querySelector(".messages-container"),t=document.querySelector(".chat-main");e||(e=document.createElement("ul")),e.classList.add("list-msg"),t.appendChild(e)}crtMsg(e){this.crtUlList();let t=document.querySelector(".list-msg"),n=document.createElement("li"),o=document.createElement("div"),i=document.createElement("span"),r=document.createElement("span"),a=document.createElement("p"),s=document.createElement("div"),l=document.createElement("span"),c=document.createElement("span");return n.setAttribute("type","txt"),n.setAttribute("id",e.id),n.classList.add("msg"),o.classList.add("element-header"),i.classList.add("element-date"),r.classList.add("element-time"),a.classList.add("element-content"),s.classList.add("element-footer"),l.classList.add("element-geolocation"),c.classList.add("element-delete"),a.textContent=e.content,l.textContent=e.coords,i.textContent=e.date,r.textContent=e.time,o.appendChild(i),o.appendChild(r),n.appendChild(o),n.appendChild(a),s.appendChild(l),s.appendChild(c),n.appendChild(s),t.append(n),n}crteLink(e){this.crtUlList();let t=document.querySelector(".list-msg"),n=document.createElement("li"),o=document.createElement("div"),i=document.createElement("span"),r=document.createElement("span"),a=document.createElement("a"),s=document.createElement("p"),l=document.createElement("div"),c=document.createElement("span"),d=document.createElement("span");return n.setAttribute("type","link"),n.setAttribute("id",e.id),a.setAttribute("href",e.link),n.classList.add("msg"),o.classList.add("element-header"),i.classList.add("element-date"),r.classList.add("element-time"),a.classList.add("element-link"),s.classList.add("element-content"),s.classList.add("element-content-file"),l.classList.add("element-footer"),c.classList.add("element-geolocation"),d.classList.add("element-delete"),s.textContent=e.content,c.textContent=e.coords,i.textContent=e.date,r.textContent=e.time,o.appendChild(i),o.appendChild(r),n.appendChild(o),n.appendChild(a),a.appendChild(s),l.appendChild(c),l.appendChild(d),n.appendChild(l),t.append(n),n}crtFile(e){let t=new Blob([e.file.data]);console.log(t),this.crtUlList();let n=document.querySelector(".list-msg"),o=document.createElement("li"),i=document.createElement("div"),r=document.createElement("span"),a=document.createElement("span"),s=document.createElement("div"),l=document.createElement("a"),c=document.createElement("p"),d=document.createElement("div"),m=document.createElement("span"),p=document.createElement("span");return o.setAttribute("type","file"),o.setAttribute("id",e.data.id),o.classList.add("msg"),i.classList.add("element-header"),r.classList.add("element-date"),a.classList.add("element-time"),s.classList.add("element-content-container"),l.classList.add("element-content"),l.classList.add("element-content-file"),c.classList.add("element-save-content"),d.classList.add("element-footer"),m.classList.add("element-geolocation"),p.classList.add("element-delete"),l.textContent=e.data.name,r.textContent=e.data.date,a.textContent=e.data.time,m.textContent=e.data.coords,i.appendChild(r),i.appendChild(a),s.appendChild(l),s.appendChild(c),d.appendChild(m),d.appendChild(p),o.appendChild(i),o.appendChild(s),o.appendChild(d),n.append(o),o}crtVideo(e){this.crtUlList();let t=document.querySelector(".list-msg"),n=document.createElement("li"),o=document.createElement("video"),i=document.createElement("div"),r=document.createElement("span"),a=document.createElement("span"),s=document.createElement("p"),l=document.createElement("div"),c=document.createElement("span"),d=document.createElement("span");return n.setAttribute("type","video"),n.setAttribute("id",e.data.id),n.classList.add("msg"),o.classList.add("video"),o.controls=!0,i.classList.add("element-header"),r.classList.add("element-date"),a.classList.add("element-time"),s.classList.add("element-content"),l.classList.add("element-footer"),c.classList.add("element-geolocation"),d.classList.add("element-delete"),c.textContent=e.data.coords,r.textContent=e.data.date,a.textContent=e.data.time,i.appendChild(r),i.appendChild(a),n.appendChild(i),n.appendChild(o),l.appendChild(c),l.appendChild(d),n.appendChild(l),t.append(n),n}crtAudio(e){this.crtUlList();let t=document.querySelector(".list-msg"),n=document.createElement("li"),o=document.createElement("audio"),i=document.createElement("div"),r=document.createElement("span"),a=document.createElement("span"),s=document.createElement("p"),l=document.createElement("div"),c=document.createElement("span"),d=document.createElement("span");return n.setAttribute("type","audio"),n.setAttribute("id",e.data.id),n.classList.add("msg"),o.classList.add("audio"),o.controls=!0,i.classList.add("element-header"),r.classList.add("element-date"),a.classList.add("element-time"),s.classList.add("element-content"),l.classList.add("element-footer"),c.classList.add("element-geolocation"),d.classList.add("element-delete"),c.textContent=e.data.coords,r.textContent=e.data.date,a.textContent=e.data.time,i.appendChild(r),i.appendChild(a),n.appendChild(i),n.appendChild(o),l.appendChild(c),l.appendChild(d),n.appendChild(l),t.append(n),n}crtAllMsg(e){if("txt"!=e.type)if("link"!=e.type){if(e.data&&"audio"==e.data.type){let t=this.crtAudio(e);return t.addEventListener("click",L),t.click(),t.removeEventListener("click",L),void t.querySelector(".element-delete").addEventListener("click",b)}if(e.data&&"video"==e.data.type){let t=this.crtVideo(e);return t.addEventListener("click",L),t.click(),t.removeEventListener("click",L),void t.querySelector(".element-delete").addEventListener("click",b)}if(e.data&&"file"==e.data.type){let t=this.crtFile(e),n=t.querySelector(".element-delete"),o=t.querySelector(".element-save-content");return t.querySelector(".element-content").addEventListener("click",x),o.addEventListener("click",x),void n.addEventListener("click",b)}}else this.crteLink(e).querySelector(".element-delete").addEventListener("click",b);else this.crtMsg(e).querySelector(".element-delete").addEventListener("click",b)}}document.addEventListener("DOMContentLoaded",(async()=>{let e=document.querySelector(".connection-to-server"),t=document.querySelector(".connection-to-server-result");await(async e=>{let t=y+"/serverAvailable";const n=await fetch(t,{headers:{"Content-Type":"application/json"},method:"GET"}).then((e=>e.json()));return console.log(n),n})().then((()=>{e.style.animation="none",e.style.backgroundColor="green",t.textContent="Соединение с сервером установлено!",document.querySelector(".no-click-element").remove()})).catch((()=>{t.textContent="Соединение с сервером не удалось установить. Пожалуйста, перезагрузите страницу!",e.style.animation="none",e.style.backgroundColor="red"}));let n=await(async e=>{let t=y+"/getAllMessages";const n=await fetch(t,{headers:{"Content-Type":"application/json"},method:"GET"}).then((e=>e.json()));return console.log(n),n})();for(const e of n.fullMessages)(new ne).crtAllMsg(e);let{lastFiveMsg:o,otherMsg:i}=(e=>{let t=[],n=[],o=[];for(let n=e.length;n>e.length-5;n--)void 0!==e[n-1]&&t.push(e[n-1]);for(let i=e.length;i>0;i--)t.includes(e[i-1])||(n.push([e[i-1]]),5==n.length?(o.push(n),n=[]):1==i&&5!==n.length&&o.push(n));for(const e of o)for(const t of e){let e=t[0].id;e||(e=t[0].data.id),document.getElementById(e).classList.add("hidden")}return{lastFiveMsg:t,otherMsg:o}})(n.fullMessages);if(0!==o.length){let e=document.querySelector(".chat-main");e.querySelectorAll(".msg"),document.getElementById(o[0].id).scrollIntoView(top),e.addEventListener("scroll",(t=>{let n=e.querySelectorAll(".hidden");if(0==e.scrollTop&&0!==n.length){let e=document.querySelectorAll(".hidden"),t=Array.from(e),n=t[t.length-1];((e,t)=>{document.querySelector(".chat-main");let n=e,o=e[0];if(0!=n.length){for(const e of o)for(const t of e){let e=t.id;e||(e=t.data.id),document.getElementById(e).classList.remove("hidden")}t.scrollIntoView(top),n.splice(0,1),o=void 0}})(i,n)}}))}const r=document.querySelector(".menu"),a=document.querySelector(".container-menu"),s=a.querySelector(".close-menu"),l=a.querySelector(".show-messages"),c=document.querySelector(".all-messages"),d=c.querySelector(".close-all-messages"),m=document.querySelector(".write-message"),p=document.querySelector(".send-voice-message"),u=document.querySelector(".send-video"),g=document.querySelector(".send-smile"),h=document.querySelector(".smile-container"),f=document.querySelector(".clear-chat");let b=document.getElementById("img-input"),v=document.querySelector(".form-send-file"),x=document.querySelector(".write-message-input");const L=h.querySelectorAll(".emoji");let w=document.querySelectorAll(".type-message");const C=new te(a,c,p,u,h,void 0,m);r.addEventListener("click",C.headerMenuVisible),s.addEventListener("click",C.headerMenuHidden),l.addEventListener("click",C.showAllMessagesBlock),d.addEventListener("click",C.closeAllMessagesBlock),m.addEventListener("input",C.changeMicroToMessage),m.addEventListener("keypress",_),x.addEventListener("click",(e=>{e.preventDefault(),m.focus()})),x.addEventListener("drop",E),g.addEventListener("mouseover",C.showSmileMenu);for(const e of L)e.addEventListener("click",C.listenerEmojiClick),e.addEventListener("mouseover",C.listenerEmojiMouseOver),e.addEventListener("mouseout",C.listenerEmojiMouseOut);p.addEventListener("click",P),u.addEventListener("click",G),f.addEventListener("click",C.clearChat),b.addEventListener("change",k),v.addEventListener("submit",C.sendFile),document.getElementById("img-input"),b.addEventListener("drop",E);for(const e of w)e.addEventListener("click",C.filterMessages)}))})()})();